<div class="notifications-container">
  <!-- Bell Icon with Badge -->
  <button class="notification-bell" (click)="toggleNotifications()">
    ðŸ””
    <span class="badge" *ngIf="unreadCount > 0">{{ unreadCount > 9 ? '9+' : unreadCount }}</span>
  </button>

  <!-- Dropdown -->
  <div class="notifications-dropdown" *ngIf="isOpen">
    <div class="dropdown-header">
      <h3>Notifications</h3>
      <button class="mark-all-btn" *ngIf="unreadCount > 0" (click)="markAllAsRead()">Mark all read</button>
    </div>

    <div class="notifications-list">
      <div *ngIf="isLoading" class="loading">Loading...</div>
      
      <div *ngIf="!isLoading && notifications.length === 0" class="empty">
        No notifications yet
      </div>

      <div 
        *ngFor="let notification of notifications" 
        class="notification-item"
        [class.unread]="!notification.isRead"
        (click)="markAsRead(notification)">
        
        <span class="notification-icon">{{ getNotificationIcon(notification.type) }}</span>
        
        <div class="notification-content">
          <p class="notification-message">{{ notification.message }}</p>
          <span class="notification-time">{{ formatTime(notification.createdAt) }}</span>
        </div>

        <!-- Group invite buttons -->
        <div class="invite-actions" *ngIf="notification.type === 'GROUP_INVITE' && notification.relatedGroup">
          <!-- Show buttons if not yet responded -->
          <ng-container *ngIf="!getInviteResponse(notification)">
            <button 
              class="accept-btn"
              (click)="acceptGroupInvite(notification); $event.stopPropagation()">
              Join
            </button>
            <button 
              class="reject-btn"
              (click)="rejectGroupInvite(notification); $event.stopPropagation()">
              âœ•
            </button>
          </ng-container>
          
          <!-- Show status if responded -->
          <span class="invite-status accepted" *ngIf="getInviteResponse(notification) === 'accepted'">
            âœ“ Joined
          </span>
          <span class="invite-status rejected" *ngIf="getInviteResponse(notification) === 'rejected'">
            Declined
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
